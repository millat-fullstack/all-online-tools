<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Image Converter & Editor | JPG ⇄ PNG, Crop, Rotate, Resize</title>
  <meta name="description" content="Convert JPG to PNG and PNG to JPG, crop, rotate, and resize images online. Fast client-side image editor — no uploads, secure and free." />
  <meta name="keywords" content="jpg to png, png to jpg, image converter, crop image online, rotate image, resize image, image editor online" />
  <style>
    /* Futuristic neon theme matching your site */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg,#0f0c29,#302b63,#24243e);
      color: #fff;
      padding: 28px;
      min-height: 100vh;
      -webkit-font-smoothing:antialiased;
    }
    .wrap {
      max-width: 1050px;
      margin: 0 auto;
      background: rgba(20,20,40,0.95);
      padding: 22px;
      border-radius: 14px;
      box-shadow: 0 0 20px rgba(0,200,255,0.12);
    }
    h1 { color:#0ff; font-size:1.6rem; text-align:center; margin-bottom:6px; }
    p.lead { color:#aac; text-align:center; margin-bottom:18px; }

    .top-row { display:flex; gap:12px; align-items:center; justify-content:center; flex-wrap:wrap; margin-bottom:14px; }
    input[type=file] { background:#0b0b13; color:#0ff; border-radius:10px; padding:10px; border:1px solid rgba(0,255,255,0.06); }
    .controls { display:flex; gap:8px; flex-wrap:wrap; justify-content:center; margin-bottom:12px; }
    select, input[type=number], button { padding:10px 12px; border-radius:10px; border:none; background:rgba(0,255,255,0.10); color:#0ff; font-weight:700; cursor:pointer; }
    select:hover, button:hover, input[type=number]:hover { background:rgba(0,255,255,0.28); box-shadow:0 0 8px rgba(0,200,255,0.12); }

    .editor {
      display:grid;
      grid-template-columns: 1fr 320px;
      gap:18px;
      align-items:start;
    }
    @media(max-width:900px) { .editor { grid-template-columns: 1fr; } }

    .canvas-wrap {
      background:#05050a;
      border-radius:10px;
      padding:12px;
      border:1px solid rgba(0,255,255,0.04);
      text-align:center;
    }
    canvas { max-width:100%; height:auto; border-radius:6px; background:#000; cursor:crosshair; display:block; margin: 0 auto; }

    .sidebar {
      background: rgba(10,10,20,0.6);
      padding:12px;
      border-radius:10px;
      border:1px solid rgba(0,255,255,0.04);
    }
    .field { margin-bottom:10px; color:#ccc; font-size:0.95rem; }
    .field label { display:block; color:#0ff; font-weight:700; margin-bottom:6px; }
    .small { font-size:0.85rem; color:#99b; margin-top:6px; }

    .actions { display:flex; gap:8px; flex-wrap:wrap; margin-top:10px; justify-content:center; }
    .btn { padding:10px 12px; border-radius:8px; background:rgba(0,255,255,0.12); color:#0ff; border:none; font-weight:700; cursor:pointer; }
    .btn:hover { background:rgba(0,255,255,0.3); box-shadow:0 0 8px rgba(0,200,255,0.2); }

    .note { color:#99b; text-align:center; margin-top:12px; }
    .info-section { margin-top:20px; background: rgba(10,10,20,0.6); padding:16px; border-radius:10px; }
    .info-section h2 { color:#0ff; margin-bottom:8px; }
    .info-section p, .info-section ul { color:#ccc; line-height:1.6; }
    .info-section ul { padding-left:18px; }
    .status { color:#aaf; text-align:center; margin-top:8px; font-weight:700; }

    /* Crop rectangle visual */
    .crop-rect {
      position: absolute;
      border: 2px dashed rgba(0,255,255,0.6);
      background: rgba(0,255,255,0.06);
      pointer-events:none;
    }
    .rel { position: relative; display:inline-block; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Image Converter & Editor — JPG ⇄ PNG</h1>
    <p class="lead">Convert images between JPG and PNG, crop (drag), rotate, resize, and download — fully client-side and secure.</p>

    <div class="top-row">
      <input id="fileInput" type="file" accept="image/jpeg,image/png" />
      <div class="controls">
        <select id="outputFormat" title="Choose output format">
          <option value="image/jpeg">Download as JPG (JPEG)</option>
          <option value="image/png">Download as PNG</option>
        </select>

        <button id="rotateLeft" class="btn">⟲ Rotate Left</button>
        <button id="rotateRight" class="btn">⟳ Rotate Right</button>
      </div>
    </div>

    <div class="editor">
      <div>
        <div class="canvas-wrap rel" id="canvasContainer">
          <canvas id="imageCanvas"></canvas>
          <!-- crop rectangle overlay -->
          <div id="cropRect" class="crop-rect" style="display:none;"></div>
        </div>

        <div class="actions" style="margin-top:12px;">
          <button id="enableCrop" class="btn">Start Crop (Draw)</button>
          <button id="applyCrop" class="btn">Apply Crop</button>
          <button id="resetCrop" class="btn">Reset Crop</button>
        </div>

        <div class="actions" style="margin-top:10px;">
          <label class="field" style="display:flex; gap:8px; align-items:center; justify-content:center;">
            <span style="color:#0ff; font-weight:700;">Resize:</span>
            <input id="resizeWidth" type="number" placeholder="width px" style="width:120px; padding:8px; border-radius:8px; background:#0b0b13; color:#0ff; border:1px solid rgba(0,255,255,0.04);" />
            <input id="resizeHeight" type="number" placeholder="height px" style="width:120px; padding:8px; border-radius:8px; background:#0b0b13; color:#0ff; border:1px solid rgba(0,255,255,0.04);" />
            <button id="applyResize" class="btn">Apply</button>
          </label>
        </div>

        <div class="note">Tip: Use Crop to select an area by dragging over the image. Apply crop then choose output format and download.</div>
      </div>

      <aside class="sidebar">
        <div class="field"><label>Preview / Tools</label>
          <div style="color:#aac; font-size:0.95rem;">Loaded image info:</div>
          <div id="imgInfo" style="margin-top:8px; color:#ccc;">No image loaded</div>
        </div>

        <div class="field"><label>JPEG Quality (if JPG)</label>
          <input id="jpegQuality" type="number" min="10" max="100" value="85" style="width:100%; padding:8px; border-radius:8px; background:#0b0b13; color:#0ff; border:1px solid rgba(0,255,255,0.04);" />
          <div class="small">Enter 10–100. Used only when outputting JPG.</div>
        </div>

        <div class="field"><label>Actions</label>
          <div style="display:flex; gap:8px; flex-wrap:wrap;">
            <button id="downloadBtn" class="btn">Download</button>
            <button id="resetBtn" class="btn">Reset</button>
            <button id="fitBtn" class="btn">Fit to Canvas</button>
          </div>
        </div>

        <div id="status" class="status">Status: Ready</div>
      </aside>
    </div>

    <!-- SEO guideline & benefits -->
    <section class="info-section" style="margin-top:18px;">
      <h2>How to Use the Image Converter & Editor</h2>
      <p>
        Upload a JPG or PNG image. Use the crop tool to drag-select an area and apply the crop. Rotate left or right as needed. To resize, input your desired width and height (px) and click <strong>Apply</strong>. Choose the output format (JPG or PNG) and — if JPG — set quality. Click <strong>Download</strong> to save the converted image. Everything runs locally in your browser: no files are uploaded to a server.
      </p>
    </section>

    <section class="info-section" style="margin-top:12px;">
      <h2>Top 5 Benefits</h2>
      <ul>
        <li><strong>Privacy-first:</strong> All processing happens on your device — no uploads or third-party storage.</li>
        <li><strong>Flexible conversion:</strong> Convert between JPG and PNG easily for web or print use.</li>
        <li><strong>Quick editing:</strong> Crop, rotate, and resize without installing software.</li>
        <li><strong>Control quality:</strong> Choose JPEG quality for smaller files or higher fidelity.</li>
        <li><strong>Free & browser-based:</strong> Works on desktop and modern mobile browsers.</li>
      </ul>
    </section>

  </div>

  <script>
    // Elements
    const fileInput = document.getElementById('fileInput');
    const canvas = document.getElementById('imageCanvas');
    const ctx = canvas.getContext('2d');
    const imgInfo = document.getElementById('imgInfo');
    const statusEl = document.getElementById('status');
    const outputFormat = document.getElementById('outputFormat');
    const jpegQuality = document.getElementById('jpegQuality');

    const rotateLeftBtn = document.getElementById('rotateLeft');
    const rotateRightBtn = document.getElementById('rotateRight');
    const enableCropBtn = document.getElementById('enableCrop');
    const applyCropBtn = document.getElementById('applyCrop');
    const resetCropBtn = document.getElementById('resetCrop');
    const cropRectEl = document.getElementById('cropRect');
    const canvasContainer = document.getElementById('canvasContainer');
    const applyResizeBtn = document.getElementById('applyResize');
    const resizeWInput = document.getElementById('resizeWidth');
    const resizeHInput = document.getElementById('resizeHeight');
    const downloadBtn = document.getElementById('downloadBtn');
    const resetBtn = document.getElementById('resetBtn');
    const fitBtn = document.getElementById('fitBtn');

    let img = new Image();
    let imgLoaded = false;
    let currentAngle = 0; // degrees
    let cropMode = false;
    let cropStart = null;
    let cropRect = null; // {x,y,w,h} in canvas coords
    let naturalW = 0, naturalH = 0;

    // Helpers
    function setStatus(s) { statusEl.textContent = 'Status: ' + s; }
    function updateImgInfo() {
      if (!imgLoaded) { imgInfo.innerHTML = 'No image loaded'; return; }
      imgInfo.innerHTML = `
        Name: ${loadedFileName || 'uploaded image'} <br>
        Natural: ${naturalW} × ${naturalH} px <br>
        Display: ${canvas.width} × ${canvas.height} px <br>
        Angle: ${currentAngle}°
      `;
      resizeWInput.value = canvas.width;
      resizeHInput.value = canvas.height;
    }

    // Load file
    let loadedFileName = '';
    fileInput.addEventListener('change', (e) => {
      const f = e.target.files && e.target.files[0];
      if (!f) return;
      loadedFileName = f.name;
      const reader = new FileReader();
      reader.onload = (ev) => {
        img = new Image();
        img.onload = () => {
          naturalW = img.naturalWidth;
          naturalH = img.naturalHeight;
          currentAngle = 0;
          cropRect = null;
          cropMode = false;
          cropRectEl.style.display = 'none';
          canvas.width = Math.min(1000, img.naturalWidth); // limit display size for layout
          canvas.height = Math.round(canvas.width * img.naturalHeight / img.naturalWidth);
          drawImageToCanvas();
          imgLoaded = true;
          setStatus('Image loaded');
          updateImgInfo();
        };
        img.src = ev.target.result;
      };
      reader.readAsDataURL(f);
    });

    function clearCanvas() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
    }

    function drawImageToCanvas() {
      clearCanvas();
      // Save and translate for possible rotation
      ctx.save();
      // translate to center for rotation
      const cx = canvas.width/2, cy = canvas.height/2;
      ctx.translate(cx, cy);
      ctx.rotate(currentAngle * Math.PI / 180);
      // calculate draw size after rotation: draw image centered
      // For simplicity, scale image to fit canvas bounding box
      const w = canvas.width, h = canvas.height;
      // draw with image centered (x,y are -w/2, -h/2)
      // But if rotated by 90 or 270, swapping dims necessary for proper aspect:
      // We'll draw image scaled to canvas size ignoring rotation shape for simplicity and UX.
      ctx.drawImage(img, -w/2, -h/2, w, h);
      ctx.restore();
      // If cropRect exists, show overlay rect as absolute div positioned over canvas
      renderCropOverlay();
    }

    // Rotation
    rotateLeftBtn.addEventListener('click', () => {
      if (!imgLoaded) return alert('Load an image first');
      currentAngle = (currentAngle - 90) % 360;
      drawImageToCanvas();
      updateImgInfo();
    });
    rotateRightBtn.addEventListener('click', () => {
      if (!imgLoaded) return alert('Load an image first');
      currentAngle = (currentAngle + 90) % 360;
      drawImageToCanvas();
      updateImgInfo();
    });

    // Crop interaction: draw a rectangle overlay with mouse
    enableCropBtn.addEventListener('click', () => {
      if (!imgLoaded) return alert('Load an image first');
      cropMode = !cropMode;
      enableCropBtn.textContent = cropMode ? 'Drawing: Click+Drag' : 'Start Crop (Draw)';
      setStatus(cropMode ? 'Crop mode enabled — drag to select area' : 'Crop mode disabled');
      if (!cropMode) {
        cropStart = null;
      }
    });

    // Mouse events on canvasContainer to draw selection
    canvasContainer.addEventListener('mousedown', (e) => {
      if (!cropMode || !imgLoaded) return;
      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      cropStart = { x, y };
      cropRectEl.style.display = 'block';
      cropRectEl.style.left = x + 'px';
      cropRectEl.style.top = y + 'px';
      cropRectEl.style.width = '0px';
      cropRectEl.style.height = '0px';
    });
    window.addEventListener('mousemove', (e) => {
      if (!cropMode || !cropStart) return;
      const rect = canvas.getBoundingClientRect();
      const x = clamp(e.clientX - rect.left, 0, rect.width);
      const y = clamp(e.clientY - rect.top, 0, rect.height);
      const sx = clamp(Math.min(x, cropStart.x), 0, rect.width);
      const sy = clamp(Math.min(y, cropStart.y), 0, rect.height);
      const w = Math.abs(x - cropStart.x);
      const h = Math.abs(y - cropStart.y);
      cropRectEl.style.left = (rect.left + sx - rect.left) + 'px'; // simplified
      cropRectEl.style.top = (rect.top + sy - rect.top) + 'px';
      // But because cropRectEl is absolutely positioned relative to page, position relative to container:
      const containerRect = canvasContainer.getBoundingClientRect();
      cropRectEl.style.left = (sx + containerRect.left - containerRect.left) + 'px';
      cropRectEl.style.top = (sy + containerRect.top - containerRect.top) + 'px';
      cropRectEl.style.width = w + 'px';
      cropRectEl.style.height = h + 'px';
      // store in canvas coordinates:
      cropRect = {
        x: Math.round(sx * canvas.width / rect.width),
        y: Math.round(sy * canvas.height / rect.height),
        w: Math.round(w * canvas.width / rect.width),
        h: Math.round(h * canvas.height / rect.height)
      };
    });
    window.addEventListener('mouseup', (e) => {
      if (!cropMode || !cropStart) return;
      cropStart = null;
      setStatus('Selection ready — click Apply Crop to crop');
    });

    function renderCropOverlay() {
      if (!cropRect) {
        cropRectEl.style.display = 'none';
        return;
      }
      const rect = canvas.getBoundingClientRect();
      const containerRect = canvasContainer.getBoundingClientRect();
      const left = (cropRect.x / canvas.width) * rect.width;
      const top = (cropRect.y / canvas.height) * rect.height;
      const w = (cropRect.w / canvas.width) * rect.width;
      const h = (cropRect.h / canvas.height) * rect.height;
      cropRectEl.style.display = 'block';
      cropRectEl.style.left = left + 'px';
      cropRectEl.style.top = top + 'px';
      cropRectEl.style.width = w + 'px';
      cropRectEl.style.height = h + 'px';
    }

    // Apply Crop
    applyCropBtn.addEventListener('click', () => {
      if (!imgLoaded) return alert('Load an image first');
      if (!cropRect) return alert('No crop area selected');
      // create temporary canvas with cropped area
      const tmp = document.createElement('canvas');
      tmp.width = cropRect.w;
      tmp.height = cropRect.h;
      const tctx = tmp.getContext('2d');
      // Draw current canvas pixels onto tmp (respect rotation already drawn)
      // We'll draw the current visible canvas region:
      tctx.drawImage(canvas, cropRect.x, cropRect.y, cropRect.w, cropRect.h, 0, 0, cropRect.w, cropRect.h);
      // replace img with cropped data
      img = new Image();
      img.onload = () => {
        naturalW = img.naturalWidth;
        naturalH = img.naturalHeight;
        canvas.width = img.naturalWidth;
        canvas.height = img.naturalHeight;
        currentAngle = 0;
        cropRect = null;
        cropRectEl.style.display = 'none';
        drawImageToCanvas();
        setStatus('Crop applied');
        updateImgInfo();
      };
      img.src = tmp.toDataURL(); // default PNG
      imgLoaded = true;
    });

    resetCropBtn.addEventListener('click', () => {
      cropRect = null;
      cropRectEl.style.display = 'none';
      cropMode = false;
      enableCropBtn.textContent = 'Start Crop (Draw)';
      setStatus('Crop reset');
      drawImageToCanvas();
    });

    // Resize
    applyResizeBtn.addEventListener('click', () => {
      if (!imgLoaded) return alert('Load an image first');
      const w = parseInt(resizeWInput.value);
      const h = parseInt(resizeHInput.value);
      if (!w || !h) return alert('Enter valid width and height');
      const tmp = document.createElement('canvas');
      tmp.width = w;
      tmp.height = h;
      const tctx = tmp.getContext('2d');
      // draw current canvas content scaled to new size
      tctx.drawImage(canvas, 0, 0, canvas.width, canvas.height, 0, 0, w, h);
      img = new Image();
      img.onload = () => {
        naturalW = img.naturalWidth;
        naturalH = img.naturalHeight;
        canvas.width = img.naturalWidth;
        canvas.height = img.naturalHeight;
        currentAngle = 0;
        cropRect = null;
        cropRectEl.style.display = 'none';
        drawImageToCanvas();
        setStatus('Resize applied');
        updateImgInfo();
      };
      img.src = tmp.toDataURL();
      imgLoaded = true;
    });

    // Download current image on canvas in selected format
    downloadBtn.addEventListener('click', () => {
      if (!imgLoaded) return alert('Load an image first');
      const fmt = outputFormat.value;
      const quality = Math.max(0.1, Math.min(1, (parseInt(jpegQuality.value || 85) / 100)));
      canvas.toBlob((blob) => {
        if (!blob) return alert('Export failed');
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        const ext = fmt === 'image/png' ? 'png' : 'jpg';
        a.href = url;
        a.download = `converted.${ext}`;
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(url);
        setStatus('Downloaded');
      }, fmt, fmt === 'image/jpeg' ? quality : undefined);
    });

    // Reset tool (reload original)
    resetBtn.addEventListener('click', () => {
      location.reload(); // quick reset
    });

    // Fit to canvas (scale preview to natural if small)
    fitBtn.addEventListener('click', () => {
      if (!imgLoaded) return;
      // set canvas to natural dims but limited width for layout
      canvas.width = Math.min(1000, naturalW);
      canvas.height = Math.round(canvas.width * naturalH / naturalW);
      drawImageToCanvas();
      updateImgInfo();
      setStatus('Fitted to natural size (clamped)');
    });

    // Utility clamp
    function clamp(v, a, b) { return Math.max(a, Math.min(b, v)); }

    // Initial draw fallback
    function emptyCanvas() {
      canvas.width = 600;
      canvas.height = 360;
      ctx.fillStyle = '#000';
      ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle = '#222';
      ctx.fillRect(10,10,canvas.width-20,canvas.height-20);
      ctx.fillStyle = '#0ff';
      ctx.font = '16px Segoe UI';
      ctx.fillText('No image loaded. Upload JPG or PNG to begin.', 20, 40);
    }
    emptyCanvas();

    // Keep overlay positioned correctly on resize
    window.addEventListener('resize', () => {
      if (imgLoaded) drawImageToCanvas();
    });

    // Update image when canvas is ready
    // (drawImageToCanvas already called after load)
  </script>
</body>
</html>
